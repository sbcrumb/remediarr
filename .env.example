########################################
# Remediarr Configuration (.env)
# Copy to .env and edit values
########################################

# ====== Web server ======
APP_HOST=0.0.0.0
APP_PORT=8189
# INFO (default), DEBUG, WARNING, ERROR
LOG_LEVEL=INFO

# ====== Webhook security (optional) ======
# If set, verify HMAC signature from Jellyseerr (X-Jellyseerr-Signature)
WEBHOOK_SHARED_SECRET=
# Or require a custom header/value pair
WEBHOOK_HEADER_NAME=X-Jellyseerr-Token
WEBHOOK_HEADER_VALUE=

# ====== Jellyseerr ======
JELLYSEERR_URL=http://jellyseerr:5055
JELLYSEERR_API_KEY=

# Try to auto-close issues after remediation? true/false
JELLYSEERR_CLOSE_ISSUES=true
# Optional message posted when auto-closing (leave blank for silent close).
# NOTE: Do NOT include "[Remediarr]" — it will be added automatically.
JELLYSEERR_CLOSE_MESSAGE=Issue auto-closed after remediation. If anything’s still off, comment and I’ll take another pass.

# ====== Sonarr ======
SONARR_URL=http://sonarr:8989
SONARR_API_KEY=
# Per-request timeout (seconds)
SONARR_HTTP_TIMEOUT=60

# ====== Radarr ======
RADARR_URL=http://radarr:7878
RADARR_API_KEY=
# Per-request timeout (seconds)
RADARR_HTTP_TIMEOUT=60

# ====== Keywords (comma-separated, case-insensitive) ======
# TV
TV_AUDIO_KEYWORDS=no audio,no sound,missing audio,audio issue,wrong language,not in english
TV_VIDEO_KEYWORDS=no video,video glitch,black screen,stutter,pixelation
TV_SUBTITLE_KEYWORDS=missing subs,no subtitles,bad subtitles,wrong subs,subs out of sync
TV_OTHER_KEYWORDS=buffering,playback error,corrupt file

# Movies
MOVIE_AUDIO_KEYWORDS=no audio,no sound,audio issue,wrong language,not in english
MOVIE_VIDEO_KEYWORDS=no video,video missing,bad video,broken video,black screen
MOVIE_SUBTITLE_KEYWORDS=missing subs,no subtitles,bad subtitles,wrong subs,subs out of sync
MOVIE_OTHER_KEYWORDS=buffering,playback error,corrupt file
MOVIE_WRONG_KEYWORDS=not the right movie,wrong movie,incorrect movie

# ====== Behavior toggles ======
# Mark the last grabbed release as failed before retrying (best-effort)
ENABLE_BLOCKLIST=true

# ====== Notifications (optional) ======
# Gotify
GOTIFY_URL=
GOTIFY_TOKEN=
# 1–10 (higher = more urgent)
GOTIFY_PRIORITY=5

# Apprise (optional; supports Discord/Telegram/Slack/etc.)
# Example: discord://webhook_id/webhook_token
APPRISE_URL=
# If you use Apprise-Server with multiple targets, set CSV here (optional)
# APPRISE_TARGETS=https://hooks.slack.com/services/...,discord://...,telegram://...

# ====== Verification windows (post-search “did it grab?”) ======
# How long to wait for a fresh GRAB after we trigger searches
RADARR_VERIFY_GRAB_SEC=60
RADARR_VERIFY_POLL_SEC=5
SONARR_VERIFY_GRAB_SEC=60
SONARR_VERIFY_POLL_SEC=5

# ====== Customizable messages (optional) ======
# Placeholders you can use: {title} {season} {episode} {deleted} {keywords}
# IMPORTANT: Do NOT include "[Remediarr]" — the app adds it automatically.

# One-shot success comments (posted only after a new download is detected)
MSG_MOVIE_REPLACED_AND_GRABBED={title}: replaced file; new download grabbed. Closing this issue. If anything’s still off, comment and I’ll take another pass.
MSG_TV_REPLACED_AND_GRABBED={title} S{season:02d}E{episode:02d}: replaced file; new download grabbed. Closing this issue. If anything’s still off, comment and I’ll take another pass.
MSG_MOVIE_SEARCH_ONLY_GRABBED={title}: new download grabbed. Closing this issue. If anything’s still off, comment and I’ll take another pass.
MSG_TV_SEARCH_ONLY_GRABBED={title} S{season:02d}E{episode:02d}: new download grabbed. Closing this issue. If anything’s still off, comment and I’ll take another pass.

# (Optional) Generic helper messages, if you enable coaching in the future
MSG_TV_AUDIO_HANDLED=Fixed TV audio issue automatically: {title} S{season:02d}E{episode:02d}
MSG_TV_VIDEO_HANDLED=Fixed TV video issue automatically: {title} S{season:02d}E{episode:02d}
MSG_TV_SUB_HANDLED=Fixed subtitle issue automatically: {title} S{season:02d}E{episode:02d}
MSG_TV_OTHER_COACH=This type of TV issue can’t be auto-fixed. Please wait for admin review.
MSG_MOVIE_AUDIO_HANDLED=Fixed movie audio issue automatically: {title}
MSG_MOVIE_VIDEO_HANDLED=Fixed movie video issue automatically: {title}
MSG_MOVIE_SUB_HANDLED=Fixed movie subtitle issue automatically: {title}
MSG_MOVIE_WRONG_HANDLED=Wrong movie reported – handled automatically: {title}
MSG_MOVIE_OTHER_COACH=This type of movie issue can’t be auto-fixed. Please wait for admin review.
MSG_KEYWORD_COACH=Tip: include one of the auto-fix keywords next time so I can repair this automatically.
MSG_AUTOCLOSE_FAIL=Action completed but I couldn’t auto-close this issue. Please close it once you verify it’s fixed.
